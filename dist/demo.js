"use strict";(()=>{var u=(t,s)=>{$(`input[name=${t}]`).val(s)};var v=t=>{let s=localStorage.getItem(t);try{return JSON.parse(s)}catch{return s}},_=(t,s)=>{let l=typeof s=="object"?JSON.stringify(s):s;localStorage.setItem(t,l)};var y=(t,s,l)=>{let i=$(t).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(t).closest(".form-field, [form-field]").toggleClass("error",s),i.toggle(s),l&&i.text(l)};var C="hotel",V=(t,s)=>{let l="",i="";t.address_components.forEach(r=>{let c=r.types[0],m=s.address_components[c];if(m){let h=r[m];c==="route"?l=h:c==="street_number"?i=h:u(c,h)}}),u("hotel-address",`${i} ${l}`)},R=t=>{if(!t.types)return;let s=t.types.join(", ");u("place_types",s)},j=(t,s)=>{Object.keys(s).forEach(l=>{if(l==="address_components")return;let i=t[l];i&&u(l,i)})},I=t=>{if(!t)return;let s={name:"",international_phone_number:"",website:"",place_id:"",url:"",rating:"",user_ratings_total:"",address_components:{street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",country:"short_name",postal_code:"short_name"}};V(t,s),R(t),j(t,s)},W=()=>{let t=JSON.parse(localStorage.getItem(C)),s=t?t.types:"",l=["country","continent","locality","town_square","street_address","street_number","natural_feature"];for(let i=0;i<l.length;i++)if(s.includes(l[i]))return!1;return!0},B=()=>{let t=$('input[name="name"]').length>0||$('input[name="place_id"]').length>0,s=v(C);s&&t&&(I(s),u("hotel-name",v("hotel-value")));let l,i,r,c=-1,m=[],h={};$('input[name="hotel-name"]').each(function(){let d=$(this),o=d.siblings(".predictions-container");if(!o.length)return;let S=d.data("redirect-url");function k(e){if(!S||!e)return;let n=`${S}?placeid=${e}`,a;try{a=JSON.parse(sessionStorage.getItem("utmWebParams"))}catch{a=null}if(a&&typeof a=="object"){let f=[];for(let p in a)a.hasOwnProperty(p)&&f.push(`${encodeURIComponent(p)}=${encodeURIComponent(a[p])}`);f.length>0&&(n+=`&${f.join("&")}`)}window.open(n)}function T(){window.google&&window.google.maps&&(l=new google.maps.places.AutocompleteService,i=new google.maps.places.PlacesService(document.createElement("div")))}function O(e){if(r=null,c=-1,e.length>0&&l){let n={input:e};l.getPlacePredictions(n,(a,f)=>{P(a,f),a&&a.length>0&&setTimeout(()=>{o.is(":visible")&&o.find(".prediction-item").length>0&&D(0)},50)})}else o.html("").addClass("hidden")}function P(e,n){o.html(""),m=[],n===google.maps.places.PlacesServiceStatus.OK&&e&&e.length>0?(m=e,e.forEach((a,f)=>{let p=$(`
            <div class="prediction-item" data-place-id="${a.place_id}" data-index="${f}">
              <span class="main-text p13">${a.structured_formatting.main_text}</span>
              <span class="secondarytext p13 text-color-content-tertiary">${a.structured_formatting.secondary_text}</span>
            </div>
          `);o.append(p)}),o.removeClass("hidden")):o.addClass("hidden")}function D(e){let n=o.find(".prediction-item");if(n.length===0)return;e>=n.length?e=0:e<0&&(e=n.length-1),n.removeClass("selected");let a=n.eq(e).addClass("selected");c=e,r=a.data("place-id")}function b(e){let n=o.find(".prediction-item");if(n.length===0)return;e>=n.length?e=0:e<0&&(e=n.length-1),n.removeClass("selected");let a=n.eq(e).addClass("selected");c=e,r=a.data("place-id")}function g(e){e&&i&&i.getDetails({placeId:e},(n,a)=>{a===google.maps.places.PlacesServiceStatus.OK&&(d.val(n.name),o.addClass("hidden"),y(d,!1),t&&(I(n),_("hotel-value",n.name),_(C,n)),S&&k(e))})}function E(){let e=o.find(".prediction-item.selected");return e.length?(r=e.data("place-id"),g(r),!0):!1}let w;d.on("input",function(){clearTimeout(w),w=setTimeout(()=>{O($(this).val())},300)}),d.on("keydown",function(e){let n=e.which;if(n===13&&r)return e.preventDefault(),g(r),!1;if(!o.hasClass("hidden"))switch(n){case 38:e.preventDefault(),b(c-1);break;case 40:e.preventDefault(),b(c+1);break;case 13:e.preventDefault(),E();break;case 27:e.preventDefault(),o.addClass("hidden");break;case 9:if(c>=0){e.preventDefault();let a=o.find(".prediction-item.selected");a.length&&(r=a.data("place-id"),g(r))}break}}),o.on("click",".prediction-item",function(){r=$(this).data("place-id"),y(d,!1),g(r)}),o.on("mouseenter",".prediction-item",function(){c=parseInt($(this).data("index"),10),o.find(".prediction-item").removeClass("selected"),$(this).addClass("selected")}),$(document).on("click",function(e){!$(e.target).closest(o).length&&!$(e.target).is(d)&&o.addClass("hidden")}),d.on("change",function(){let e=d.val();!r&&t&&(localStorage.removeItem("hotel-value"),localStorage.removeItem(C),$('input[type="hidden"]').val(""),$('input[name="name"]').val(e))}),T()})};})();
